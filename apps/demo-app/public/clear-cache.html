<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Cache - TailwindSpark</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; padding: 2rem; max-width: 600px; margin: 0 auto; }
        .button { background: #0284c7; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 16px; margin: 8px; }
        .button:hover { background: #0369a1; }
        .success { color: #16a34a; margin: 16px 0; }
        .error { color: #dc2626; margin: 16px 0; }
    </style>
</head>
<body>
    <h1>TailwindSpark Cache Cleaner</h1>
    <p>If you're experiencing issues with the site not loading or showing blank pages, this page will help clear your browser cache and service worker.</p>
    
    <button class="button" onclick="clearCaches()">Clear All Caches</button>
    <button class="button" onclick="unregisterServiceWorker()">Unregister Service Worker</button>
    <button class="button" onclick="reloadPage()">Reload Site</button>
    
    <div id="status"></div>
    
    <h3>Manual Steps:</h3>
    <ol>
        <li>Press <kbd>Ctrl+Shift+R</kbd> (or <kbd>Cmd+Shift+R</kbd> on Mac) to hard refresh</li>
        <li>Open Developer Tools (F12) → Application → Storage → Clear All Data</li>
        <li>Try accessing the site in an incognito/private window</li>
    </ol>

    <script>
        const status = document.getElementById('status');
        
        function showStatus(message, isError = false) {
            status.innerHTML = `<div class="${isError ? 'error' : 'success'}">${message}</div>`;
        }
        
        async function clearCaches() {
            try {
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    await Promise.all(cacheNames.map(name => caches.delete(name)));
                    showStatus('✓ All caches cleared successfully');
                } else {
                    showStatus('Cache API not supported in this browser', true);
                }
            } catch (error) {
                showStatus(`Error clearing caches: ${error.message}`, true);
            }
        }
        
        async function unregisterServiceWorker() {
            try {
                if ('serviceWorker' in navigator) {
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    await Promise.all(registrations.map(reg => reg.unregister()));
                    showStatus('✓ Service worker unregistered successfully');
                } else {
                    showStatus('Service Workers not supported in this browser', true);
                }
            } catch (error) {
                showStatus(`Error unregistering service worker: ${error.message}`, true);
            }
        }
        
        function reloadPage() {
            showStatus('Redirecting to main site...');
            setTimeout(() => {
                window.location.href = './';
            }, 1000);
        }
    </script>
</body>
</html>